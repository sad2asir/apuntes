<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.66">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/apuntes/sad_favicon.png"><title>2.2 Gesti√≥n de procesos en Java - ProcessBuilder y Process | Security & High Availability</title><meta name="description" content="SAD 2nd ASIR module">
    <link rel="preload" href="/apuntes/assets/style-789b17c1.css" as="style"><link rel="stylesheet" href="/apuntes/assets/style-789b17c1.css">
    <link rel="modulepreload" href="/apuntes/assets/app-7f6f5727.js"><link rel="modulepreload" href="/apuntes/assets/processbuilder.html-e1190a03.js"><link rel="modulepreload" href="/apuntes/assets/processbuilder.html-24cba6c6.js"><link rel="modulepreload" href="/apuntes/assets/comandotree-ef7769e5.js"><link rel="prefetch" href="/apuntes/assets/InstallationNotes.html-9f398463.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-a5f91f3a.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-dd5e9d8e.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-fe14e3a3.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-e6b54d7d.js" as="script"><link rel="prefetch" href="/apuntes/assets/a UnderstandingETandPT.html-19bc0326.js" as="script"><link rel="prefetch" href="/apuntes/assets/b Pentesting methodologies.html-c1b150a0.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-68f0de1a.js" as="script"><link rel="prefetch" href="/apuntes/assets/concurrency.html-c0fe19eb.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-f5e65fb4.js" as="script"><link rel="prefetch" href="/apuntes/assets/operatingsystem.html-13f637f4.js" as="script"><link rel="prefetch" href="/apuntes/assets/process.html-ab2e808f.js" as="script"><link rel="prefetch" href="/apuntes/assets/curl_annex.html-8d6130cb.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-37f94e3a.js" as="script"><link rel="prefetch" href="/apuntes/assets/iostreams.html-fe122d84.js" as="script"><link rel="prefetch" href="/apuntes/assets/processbuilder.html-6745db8f.js" as="script"><link rel="prefetch" href="/apuntes/assets/runtime.html-5aaab033.js" as="script"><link rel="prefetch" href="/apuntes/assets/a UnderstandingETandPT.html-9f57d1f5.js" as="script"><link rel="prefetch" href="/apuntes/assets/b Pentesting methodologies.html-1df01ef2.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-a710aefc.js" as="script"><link rel="prefetch" href="/apuntes/assets/concurrency.html-bb241818.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-7595e389.js" as="script"><link rel="prefetch" href="/apuntes/assets/operatingsystem.html-6145359d.js" as="script"><link rel="prefetch" href="/apuntes/assets/process.html-2d25c4cd.js" as="script"><link rel="prefetch" href="/apuntes/assets/a UnderstandingETandPT.html-a098f9a9.js" as="script"><link rel="prefetch" href="/apuntes/assets/b Pentesting methodologies.html-48943728.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-6f7211ca.js" as="script"><link rel="prefetch" href="/apuntes/assets/curl_annex.html-cdc1e788.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-c430bf9a.js" as="script"><link rel="prefetch" href="/apuntes/assets/iostreams.html-a589d640.js" as="script"><link rel="prefetch" href="/apuntes/assets/runtime.html-c0bc2c73.js" as="script"><link rel="prefetch" href="/apuntes/assets/concurrency.html-86ce093c.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-0f29a414.js" as="script"><link rel="prefetch" href="/apuntes/assets/operatingsystem.html-d832cb7d.js" as="script"><link rel="prefetch" href="/apuntes/assets/process.html-e371f778.js" as="script"><link rel="prefetch" href="/apuntes/assets/curl_annex.html-4477b510.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-feca8f29.js" as="script"><link rel="prefetch" href="/apuntes/assets/iostreams.html-10a7d348.js" as="script"><link rel="prefetch" href="/apuntes/assets/processbuilder.html-6136c6c0.js" as="script"><link rel="prefetch" href="/apuntes/assets/runtime.html-e2f0f66c.js" as="script"><link rel="prefetch" href="/apuntes/assets/404.html-4b05ea4a.js" as="script"><link rel="prefetch" href="/apuntes/assets/InstallationNotes.html-4847a279.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-5ad50fff.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-a1a96d72.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-8a8e8293.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-cb92c251.js" as="script"><link rel="prefetch" href="/apuntes/assets/a UnderstandingETandPT.html-4c44039e.js" as="script"><link rel="prefetch" href="/apuntes/assets/b Pentesting methodologies.html-510ef2d2.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-2f242b2e.js" as="script"><link rel="prefetch" href="/apuntes/assets/concurrency.html-1215c14a.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-5f7f7259.js" as="script"><link rel="prefetch" href="/apuntes/assets/operatingsystem.html-65213906.js" as="script"><link rel="prefetch" href="/apuntes/assets/process.html-2fd9eb44.js" as="script"><link rel="prefetch" href="/apuntes/assets/curl_annex.html-85ddd67d.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-6f841768.js" as="script"><link rel="prefetch" href="/apuntes/assets/iostreams.html-5342084e.js" as="script"><link rel="prefetch" href="/apuntes/assets/processbuilder.html-443116ee.js" as="script"><link rel="prefetch" href="/apuntes/assets/runtime.html-6458f9d4.js" as="script"><link rel="prefetch" href="/apuntes/assets/a UnderstandingETandPT.html-57610afe.js" as="script"><link rel="prefetch" href="/apuntes/assets/b Pentesting methodologies.html-1d4cf502.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-f29422c3.js" as="script"><link rel="prefetch" href="/apuntes/assets/concurrency.html-aa7abf4d.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-6fe92bf2.js" as="script"><link rel="prefetch" href="/apuntes/assets/operatingsystem.html-c1b38d32.js" as="script"><link rel="prefetch" href="/apuntes/assets/process.html-8e18547a.js" as="script"><link rel="prefetch" href="/apuntes/assets/a UnderstandingETandPT.html-ce85f763.js" as="script"><link rel="prefetch" href="/apuntes/assets/b Pentesting methodologies.html-bf00156d.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-a829a592.js" as="script"><link rel="prefetch" href="/apuntes/assets/curl_annex.html-b9c59f65.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-69aa2fbd.js" as="script"><link rel="prefetch" href="/apuntes/assets/iostreams.html-b3076b3d.js" as="script"><link rel="prefetch" href="/apuntes/assets/runtime.html-6a834061.js" as="script"><link rel="prefetch" href="/apuntes/assets/concurrency.html-afb48b35.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-e4685808.js" as="script"><link rel="prefetch" href="/apuntes/assets/operatingsystem.html-4c2c98b4.js" as="script"><link rel="prefetch" href="/apuntes/assets/process.html-94ffe18b.js" as="script"><link rel="prefetch" href="/apuntes/assets/curl_annex.html-973d8f8f.js" as="script"><link rel="prefetch" href="/apuntes/assets/index.html-bfadc0f8.js" as="script"><link rel="prefetch" href="/apuntes/assets/iostreams.html-c56966ee.js" as="script"><link rel="prefetch" href="/apuntes/assets/processbuilder.html-9a6bda4e.js" as="script"><link rel="prefetch" href="/apuntes/assets/runtime.html-7b5bd2a7.js" as="script"><link rel="prefetch" href="/apuntes/assets/404.html-61bdb309.js" as="script"><link rel="prefetch" href="/apuntes/assets/CCLicense-component-4c685eb5.js" as="script"><link rel="prefetch" href="/apuntes/assets/DocumentCover-component-a28468e4.js" as="script"><link rel="prefetch" href="/apuntes/assets/DownloadPDF-component-c90422f8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="Hide/Show" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/apuntes/en/" class=""><img class="logo" src="/apuntes/LogoIES.png" alt="Security &amp; High Availability"><span class="site-name can-hide">Security &amp; High Availability</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://aules.edu.gva.es/fp/login/index.php?lang=es" rel="noopener noreferrer" target="_blank" aria-label="Aules FP"><!--[--><!--]--> Aules FP <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in a new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Course content"><span class="title">Course content</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Course content"><span class="title">Course content</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/apuntes/en/unit1/" class="" aria-label="Unit 1- Introducci√≥n a la programaci√≥n concurrente"><!--[--><!--]--> Unit 1- Introducci√≥n a la programaci√≥n concurrente <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/apuntes/en/unit2/" class="router-link-active" aria-label="Unit 2 - Programaci√≥n de procesos en Java"><!--[--><!--]--> Unit 2 - Programaci√≥n de procesos en Java <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Language"><span class="title">Language</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Language"><span class="title">Language</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/apuntes/ca/unit2/processbuilder.html" class="" aria-label="Valenci√†"><!--[--><!--]--> Valenci√† <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/apuntes/es/unit2/processbuilder.html" class="" aria-label="Castellano"><!--[--><!--]--> Castellano <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/sad2asir/sad_sources" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in a new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://aules.edu.gva.es/fp/login/index.php?lang=es" rel="noopener noreferrer" target="_blank" aria-label="Aules FP"><!--[--><!--]--> Aules FP <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in a new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Course content"><span class="title">Course content</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Course content"><span class="title">Course content</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/apuntes/en/unit1/" class="" aria-label="Unit 1- Introducci√≥n a la programaci√≥n concurrente"><!--[--><!--]--> Unit 1- Introducci√≥n a la programaci√≥n concurrente <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/apuntes/en/unit2/" class="router-link-active" aria-label="Unit 2 - Programaci√≥n de procesos en Java"><!--[--><!--]--> Unit 2 - Programaci√≥n de procesos en Java <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Language"><span class="title">Language</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Language"><span class="title">Language</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/apuntes/ca/unit2/processbuilder.html" class="" aria-label="Valenci√†"><!--[--><!--]--> Valenci√† <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/apuntes/es/unit2/processbuilder.html" class="" aria-label="Castellano"><!--[--><!--]--> Castellano <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/sad2asir/sad_sources" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in a new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Unit 2 - Programaci√≥n de procesos en Java <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/apuntes/en/unit2/" class="router-link-active sidebar-item" aria-label="2 Introducci√≥n"><!--[--><!--]--> 2 Introducci√≥n <!--[--><!--]--></a><!----></li><li><a href="/apuntes/en/unit2/runtime.html" class="sidebar-item" aria-label="2.1 Creaci√≥n de procesos en Java con Runtime"><!--[--><!--]--> 2.1 Creaci√≥n de procesos en Java con Runtime <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="2.2 Gesti√≥n de procesos en Java - ProcessBuilder y Process"><!--[--><!--]--> 2.2 Gesti√≥n de procesos en Java - ProcessBuilder y Process <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html#_2-2-1-preparacion-y-configuracion-de-un-proceso" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2.1 Preparaci√≥n y configuraci√≥n de un proceso"><!--[--><!--]--> 2.2.1 Preparaci√≥n y configuraci√≥n de un proceso <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html#modificar-el-comando-en-tiempo-de-ejecucion" class="router-link-active router-link-exact-active sidebar-item" aria-label="Modificar el comando en tiempo de ejecuci√≥n"><!--[--><!--]--> Modificar el comando en tiempo de ejecuci√≥n <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html#configuraciones-adicionales-de-un-proceso" class="router-link-active router-link-exact-active sidebar-item" aria-label="Configuraciones adicionales de un proceso"><!--[--><!--]--> Configuraciones adicionales de un proceso <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html#_2-2-2-acceso-al-proceso-una-vez-en-ejecucion" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2.2 Acceso al proceso una vez en ejecuci√≥n"><!--[--><!--]--> 2.2.2 Acceso al proceso una vez en ejecuci√≥n <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html#lanzar-una-clase-java-como-proceso-desde-otra-clase-java-en-el-mismo-proyecto" class="router-link-active router-link-exact-active sidebar-item" aria-label="Lanzar una clase Java como proceso desde otra clase java en el mismo proyecto"><!--[--><!--]--> Lanzar una clase Java como proceso desde otra clase java en el mismo proyecto <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/apuntes/en/unit2/iostreams.html" class="sidebar-item" aria-label="2.3 Gesti√≥n de la E-S de un proceso"><!--[--><!--]--> 2.3 Gesti√≥n de la E-S de un proceso <!--[--><!--]--></a><!----></li><li><a href="/apuntes/en/unit2/curl_annex.html" class="sidebar-item" aria-label="2.4 Anexo I - Curl"><!--[--><!--]--> 2.4 Anexo I - Curl <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><div true class="downloadLink" align="right"><a href="/apuntes/pdf/2.2 Gesti√≥n de procesos en Java - ProcessBuilder y Process.pdf" download><img src="/apuntes/images/download-pdf.png" title="descarrega com PDF" alt="descarrega PDF" height="50"></a><a href="/apuntes/pdf/2.2 Gesti√≥n de procesos en Java - ProcessBuilder y Process.pdf" target="_blank"><img src="/apuntes/images/open-pdf.png" title="obri com PDF" alt="obri PDF" height="50"></a></div><div class="documentcover" align="center"><img src="/apuntes/images/LogoSAD_mini_ca.png" alt="Logo SAD"><h1>2.2 Gesti√≥n de procesos en Java - ProcessBuilder y Process</h1><h2></h2><img src="/apuntes/LogoIES.png" alt="IES Doctor Balmis Logo" style="padding:2cm;"><div class="cclicense" align="center"><p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a property="dct:title" rel="cc:attributionURL" href="https://sad2asir.github.io/apuntes">Apunts de SAD</a> creats per <span property="cc:attributionName">Vicente Mart√≠nez</span> baix llic√®ncia <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.ca" target="_blank" rel="license noopener noreferrer" style="display:inline-block;"> CC BY-NC-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></p></div><div class="pagebreak"></div></div><h1 id="_2-2-gestion-de-procesos-en-java-processbuilder-y-process" tabindex="-1">2.2 Gesti√≥n de procesos en Java - ProcessBuilder y Process</h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html#_2-2-1-preparacion-y-configuracion-de-un-proceso" class="router-link-active router-link-exact-active">2.2.1 Preparaci√≥n y configuraci√≥n de un proceso</a><ul><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html#modificar-el-comando-en-tiempo-de-ejecucion" class="router-link-active router-link-exact-active">Modificar el comando en tiempo de ejecuci√≥n</a></li><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html#configuraciones-adicionales-de-un-proceso" class="router-link-active router-link-exact-active">Configuraciones adicionales de un proceso</a></li></ul></li><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html#_2-2-2-acceso-al-proceso-una-vez-en-ejecucion" class="router-link-active router-link-exact-active">2.2.2 Acceso al proceso una vez en ejecuci√≥n</a><ul><li><a aria-current="page" href="/apuntes/en/unit2/processbuilder.html#lanzar-una-clase-java-como-proceso-desde-otra-clase-java-en-el-mismo-proyecto" class="router-link-active router-link-exact-active">Lanzar una clase Java como proceso desde otra clase java en el mismo proyecto</a></li></ul></li></ul></nav><h2 id="_2-2-1-preparacion-y-configuracion-de-un-proceso" tabindex="-1">2.2.1 Preparaci√≥n y configuraci√≥n de un proceso</h2><p>En el paquete <code>java.lang</code> tenemos dos clases para la gesti√≥n de procesos.</p><ul><li><code>java.lang.ProcessBuilder</code> <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ProcessBuilder.html" target="_blank" rel="noopener noreferrer">Referencia API Java<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in a new window</span></span></a></li><li><code>java.lang.Process</code> <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ProcessBuilder.html" target="_blank" rel="noopener noreferrer">Referencia API Java<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in a new window</span></span></a></li></ul><p>Las instancias de <strong>ProcessBuilder</strong> gestionan los atributos de los procesos, mientras que las instancias de <strong>Process</strong> controlan la ejecuci√≥n de esos mismos procesos cuando se ejecutan.</p><p>Antes de ejecutar un nuevo proceso, podemos configurar los par√°metros de ejecuci√≥n del mismo usando la clase <code>ProcessBuilder</code>.</p><p>ProcessBuilder es una clase auxiliar de la clase Process, que veremos m√°s adelante, y se utiliza para controlar algunos par√°metros de ejecuci√≥n que afectar√°n al proceso. A trav√©s de la llamada al m√©todo <code>start</code> se crea un nuevo proceso en el sistema con los atributos definidos en la instancia de ProcessBuilder.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> pb </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">CMD</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/C</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">DIR</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">Process</span><span style="color:#90A4AE;"> p </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Si llamamos varias veces al m√©todo start, se crear√°n tantos nuevos procesos como llamadas hagamos, todos ellos con los mismos atributos.</p><p>La clase ProcessBuilder define un par de constructores:</p><div class="language-java" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">List</span><span style="color:#39ADB5;">&lt;</span><span style="color:#90A4AE;">String</span><span style="color:#39ADB5;">&gt;</span><span style="color:#90A4AE;"> command</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">...</span><span style="color:#90A4AE;"> command</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span></code></pre></div><p>El funcionamiento de ambos es el mismo. En el primer constructor se pasa el comando a ejecutar y la lista de argumentos como una lista de cadenas. Por contra, en el segundo constructor, el comando y sus argumentos se pasan a trav√©s de un n√∫mero variable de cadenas (String ... es lo que en Java se llama varargs). La versi√≥n que utilicemos depende del formato en que tengamos los datos.</p><div class="custom-container danger"><p class="custom-container-title">Argumentos y par√°metros</p><p>Si queremos lanzar un programa con par√°metros (modificadores que hacen que cambie la forma de funcionar un programa como -h /s ...) el comando no puede ser pasado al constructor directamente como un √∫nico string, debe ser preprocesado para convertirlo en una lista y que funcione.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// Formas diferentes de pasar el comando a los constructores de ProcessBuilder</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// 1¬™ forma: usando una cadena. Falla con par√°metros</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// S√≥lo funciona con programas que tengan argumentos</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> command1 </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">notepad.exe prueba1.txt</span><span style="color:#39ADB5;">&quot;</span></span>
<span class="line"><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> pb </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">command1</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// 2¬™ forma: usando un array de cadenas. Funciona con par√°metros</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> command2 </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">cmd</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/c</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">dir</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/o</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">};</span></span>
<span class="line"><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> pb </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">command2</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// 3¬™ forma: usando una cadena y dividi√©ndola para convertirla en una lista</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> command3 </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">c:/windows/system32/shutdown -s -t 0</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span><span style="color:#90A4AE;">  </span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// La expresi√≥n regular \s significa partir por los espacios en blanco</span></span>
<span class="line"><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> pb </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">command3</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">split</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">\\</span><span style="color:#91B859;">s</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// ESTA ES LA MEJOR FORMA PARA QUE FUNCIONE EN TODOS LOS CASOS</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="custom-container warning"><p class="custom-container-title">Apagar el sistema operativo</p><p>El comando <code>shutdown -s</code> sirve para apagar el sistema. En windows es necesario proporcionar la ruta completa al comando, por ejemplo C:\Windows\System32\shutdown.</p><p>Podemos usar como par√°metro -s para apagar el sistema, , -r para reiniciar , -h para hibernar y -t para indicar un tiempo de espera antes de apagar.</p><p><a href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/shutdown" target="_blank" rel="noopener noreferrer">Referencia del comando shutdown de Windows<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in a new window</span></span></a></p></div><div class="custom-container question"><p class="custom-container-title">Activity psp.activities.U2A1_Shutdowner</p><p>Crea una nuevo proyecto Java (package psp.actividades y como clase principal U2A1_Shutdowner). Usando la l√≠nea de comandos, pide al usuario qu√© acci√≥n quiere realizar (apagar, reiniciar o suspender) y cu√°nto tiempo quiere dejar antes de realizar la acci√≥n de apagado del sistema..</p><p>Busca informaci√≥n sobre el funcionamiento del comando shutdown en GNU/Linux y haz que tu aplicaci√≥n funcione para ambos sistemas..</p><p>La aplicaci√≥n tiene que preparar el comando correcto para la selecci√≥n que haya hecho el usuario y para el sistema operativo en el que la est√© ejecutando.</p><p>Muestra por consola el resultado del m√©todo ProcessBuilder.command() de forma legible.</p></div><details class="custom-container details"><summary>Soluci√≥n de U2A1_Shutdowner</summary><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">U2A1_Shutdowner</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">throws</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">IOException</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Ask for the required information to prepare the command</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">Scanner</span><span style="color:#90A4AE;"> keyboard </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Scanner</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">in</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">print</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Select your option (s-shutdown / r-reboot / h-hibernate): </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> shutdownOption </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> keyboard</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">nextLine</span><span style="color:#39ADB5;">();</span><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">print</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">How much seconds will the command wait to be run? (0 means immediately): </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> shutdownTime </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> keyboard</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">nextLine</span><span style="color:#39ADB5;">();</span><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Prepare the command</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> command</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">os.name</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">).</span><span style="color:#6182B8;">toLowerCase</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">startsWith</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">windows</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">))</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            command </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">C:/Windows/System32/shutdown -</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> shutdownOption </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> -t </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> shutdownTime</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">else</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            command </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">shutdown -</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> shutdownOption </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> -t </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> shutdownTime</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Prepare the process and launch it</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> shutdowner </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">command</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">split</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">\\</span><span style="color:#91B859;">s</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">//shutdowner.start();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Show the command to be run</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">print</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">El comando a ejecutar es:  </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">for</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> commandPart</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;"> shutdowner</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">())</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">print</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">commandPart </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="modificar-el-comando-en-tiempo-de-ejecucion" tabindex="-1">Modificar el comando en tiempo de ejecuci√≥n</h3><p>Puede ser que todo el comando, o parte del mismo, no lo tengamos en el momento de llamar a los constructores de ProcessBuilder. Se puede cambiar, modificar y consultar a posteriori con el m√©todo <code>command</code></p><p>Al igual que con los constructores, tenemos dos versiones del m√©todo command</p><div class="language-java" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">List</span><span style="color:#39ADB5;">&lt;</span><span style="color:#90A4AE;">String</span><span style="color:#39ADB5;">&gt;</span><span style="color:#90A4AE;"> command</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">...</span><span style="color:#90A4AE;"> command</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span></code></pre></div><p>y la tercera forma de este m√©todo (sin par√°metros) sirve para obtener una lista del comando pasado al constructor o puesto con alguna de las formas anterior del m√©todo command. Lo interesante es que una vez que tenemos la lista, podemos modificarla usando los m√©todos de la clase List.</p><p>En el siguiente ejemplo, en el momento de definir el comando, nos falta saber la √∫ltima parte, el directorio temporal. Adem√°s, si queremos hacer que la ejecuci√≥n sea multiplataforma, el shell a ejecutar tampoco lo sabemos. Dependiendo del SO se a√±aden dos valores al principio y un valor al final, con el m√©todo add de la clase List.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// Sets and modifies the command after ProcessBuilder object is created</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> command </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">java -jar install.jar -install</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// tmp dir is missing</span></span>
<span class="line"><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> pbuilder </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">command</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">split</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">\\</span><span style="color:#91B859;">s</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">isWindows</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    pbuilder</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">add</span><span style="color:#39ADB5;">(</span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">cmd</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// Sets the 1st element</span></span>
<span class="line"><span style="color:#90A4AE;">    pbuilder</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">add</span><span style="color:#39ADB5;">(</span><span style="color:#F76D47;">1</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/c</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// Sets the 2nd element</span></span>
<span class="line"><span style="color:#90A4AE;">    pbuilder</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">add</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">c:/temp</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// Sets the last element</span></span>
<span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Command to run cmd /c java -jar install.jar -install c:/temp</span></span>
<span class="line"><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">else</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    pbuilder</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">add</span><span style="color:#39ADB5;">(</span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">sh</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// Sets the 1st element</span></span>
<span class="line"><span style="color:#90A4AE;">    pbuilder</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">add</span><span style="color:#39ADB5;">(</span><span style="color:#F76D47;">1</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">-c</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// Sets the 2nd element</span></span>
<span class="line"><span style="color:#90A4AE;">    pbuilder</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">add</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/tmp</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// Sets the last element</span></span>
<span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Command to run: sh -c java -jar install.jar -install /tmp</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Starts the process</span></span>
<span class="line"><span style="color:#90A4AE;">pbuilder</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="configuraciones-adicionales-de-un-proceso" tabindex="-1">Configuraciones adicionales de un proceso</h3><p>Algunos de los atributos que podemos configurar para un proceso son:</p><ul><li><p>Establecer el directorio de trabajo donde el proceso se ejecutar√°</p><p>Podemos cambiar el directorio de trabajo por defecto llamando al m√©todo <code>directory</code> y pas√°ndole un objeto de tipo File. <strong>Por defecto, el directorio de trabajo se establece al valor de la variable del sistema user.dir</strong>. Este directorio es el punto de partida para acceder a ficheros, im√°genes y todos los recursos que necesite nuestra aplicaci√≥n.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// Cambia el directorio de trabajo a la carpeta personal del usuario</span></span>
<span class="line"><span style="color:#90A4AE;">pbuilder</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">directory</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">File</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.home</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">)));</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Configurar o modificar variables de entorno para el proceso con el m√©todo <code>environment()</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// Retrieve and modify the process environment</span></span>
<span class="line"><span style="color:#9C3EDA;">Map</span><span style="color:#39ADB5;">&lt;</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">&gt;</span><span style="color:#90A4AE;"> environment </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> pbuilder</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">environment</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Get the PATH environment variable and add a new directory</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> systemPath </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> environment</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">get</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">path</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">;c:/users/public</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">environment</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">replace</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">path</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> systemPath</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add a new environment variable and use it as a part of the command</span></span>
<span class="line"><span style="color:#90A4AE;">environment</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">GREETING</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Hola Mundo</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">processBuilder</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/bin/bash</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">-c</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">echo $GREETING</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// Indicamos el directorio donde se encuentra el ejecutable</span></span>
<span class="line"><span style="color:#9C3EDA;">File</span><span style="color:#90A4AE;"> directorio </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">File</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">bin</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">directory</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">directorio</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Mostramos la informaci√≥n de las variables de entorno</span></span>
<span class="line"><span style="color:#9C3EDA;">Map</span><span style="color:#90A4AE;"> variablesEntorno </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">environment</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">variablesEntorno</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Mostramos el nombre del proceso y sus argumentos</span></span>
<span class="line"><span style="color:#9C3EDA;">List</span><span style="color:#90A4AE;"> command </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#9C3EDA;">Iterator</span><span style="color:#90A4AE;"> iter </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> l</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">iterator</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;">while</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">iter</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">hasNext</span><span style="color:#39ADB5;">())</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">iter</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">next</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container info"><p class="custom-container-title">Variables de entorno vs Propiedades del sistema</p><p>Con la clase Runtime accedemos a las variables del sistema mientras que con ProcessBuilder lo hacemos a las propiedades del sistema, que son diferentes.</p></div></li><li><p>Redireccionar la entrada y salida est√°ndar</p></li><li><p>Heredar la E/S est√°ndar del proceso padre usando el m√©todo ProcessBuilder.inheritIO()</p><p><em>Estas dos configuraciones se ver√°n en el siguiente apartado.</em></p></li></ul><div class="custom-container question"><p class="custom-container-title">Actividad psp.activities.U2A2_DirectorioTrabajo</p><p>Crea un nuevo proyecto Java (Ant &gt; Java Application) (configura como nombre del proyecto U2A2_DirectorioTrabajo y como clase principal psp.activities.U2A2_WorkingDirectory) Escribe un programa que ejecute el comando ls o dir. Modifica el valor de la propiedad user.dir. En la misma aplicaci√≥n, cambiar el directorio de trabajo a la carpeta c:/temp o /tmp, dependiendo del sistema operativo.</p><p>Muestra el valor devuelto por el m√©todo directory()</p><ul><li>Despu√©s de crear la instancia de ProcessBuilder</li><li>Despu√©s de cambiar el valor de user.dir</li><li>Despu√©s de cambiar el directorio de trabajo al directorio temporal del sistema.</li></ul><p><em>En este momento tu programa todav√≠a no mostrar√° ning√∫n listado.</em></p></div><details class="custom-container details"><summary>Soluci√≥n de U2A2_DirectorioTrabajo</summary><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">U2A2_WorkingDirectory</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">throws</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">IOException</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Prepare the command</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> command</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">os.name</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">).</span><span style="color:#6182B8;">toLowerCase</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">startsWith</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">windows</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">))</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            command </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">cmd /c dir</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">else</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            command </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">sh -c ls</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Prepare the process and launch it</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> commander </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">command</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">split</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">\\</span><span style="color:#91B859;">s</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">//1st - Default working directory</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Working directory: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> commander</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">directory</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.dir variable: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.dir</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">//2nd - Set the user.dir</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.dir</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.home</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Working directory: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> commander</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">directory</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.dir variable: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.dir</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// 3rd - Change the working directory</span></span>
<span class="line"><span style="color:#90A4AE;">        commander</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">directory</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">File</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.home</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">)));</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Working directory: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> commander</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">directory</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">toString</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.dir variable: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.dir</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#90A4AE;">        commander</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><div class="pagebreak"></div><h2 id="_2-2-2-acceso-al-proceso-una-vez-en-ejecucion" tabindex="-1">2.2.2 Acceso al proceso una vez en ejecuci√≥n</h2><p>LA clase <code>Process</code> es una clase abstracta definida en el paquete java.lang y contiene la informaci√≥n del proceso en ejecuci√≥n. Tras invocar al m√©todo <code>start</code> de ProcessBuilder, √©ste devuelve una referencia al proceso en forma de objeto Process.</p><p>Los m√©todos de la clase Process pueden ser usados para realizar operaciones de E/S desde el proceso, para comprobar su estado, su valor de retorno, para esperar a que termine de ejecutarse y para forzar la terminaci√≥n del proceso. Sin embargo estos m√©todos no funcionan sobre procesos especiales del SO como pueden ser servicios, shell scripts, demonios, etc.</p><blockquote><p><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Process.html" target="_blank" rel="noopener noreferrer">Especificaci√≥n java.lang.Process<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in a new window</span></span></a></p></blockquote><div class="custom-container warning"><p class="custom-container-title">Entrada / Salida desde el proceso hijo</p><p>Curiosamente <strong>los procesos lanzados con el m√©todo start() no tienen una consola asignada.</strong>. Por contra, estos procesos redireccionan los streams de E/S est√°ndar (stdin, stdout, stderr) al proceso padre. Si se necesita, se puede acceder a ellos a trav√©s de los streams obtenidos con los m√©todos definidos en la clase Process como getInputStream(), getOutputStream() y getErrorSteam(). Esta es la forma de enviar y recibir informaci√≥n desde los subprocesos.</p></div><p>Los principales m√©todos de esta clase son:</p><table><thead><tr><th style="text-align:left;">M√©todo</th><th style="text-align:left;">Descripci√≥n</th></tr></thead><tbody><tr><td style="text-align:left;">int exitValue()</td><td style="text-align:left;">C√≥digo de finalizaci√≥n devuelto por el proceso hijo (ver Info m√°s abajo)</td></tr><tr><td style="text-align:left;">Boolean isAlive()</td><td style="text-align:left;">Comprueba si el proceso todav√≠a est√° en ejecuci√≥n</td></tr><tr><td style="text-align:left;">int waitFor()</td><td style="text-align:left;">hace que el proceso padre se quede esperando a que el proceso hijo termine. El entrono que devuelve es el c√≥digo de finalizaci√≥n del proceso hijo</td></tr><tr><td style="text-align:left;">Boolean waitFor(long timeOut, TimeUnit unit)</td><td style="text-align:left;">El funcionamiento es el mismo que en el caos anterior s√≥lo que en esta ocasi√≥n podemos especificar cu√°nto tiempo queremos esperar a que el proceso hijo termine. El m√©todo devuelve true si el proceso termina antes de que pase el tiempo indicado y false si ha pasado el tiempo y el proceso no ha terminado.</td></tr><tr><td style="text-align:left;">void destroy()</td><td style="text-align:left;">Estos dos m√©todos se utilizan para matar al proceso. El segundo lo hace de forma forzosa.</td></tr><tr><td style="text-align:left;">Process destroyForcibly()</td><td style="text-align:left;"></td></tr></tbody></table><p>Veamos un sencillo ejemplo. Una vez lanzado el programa espera durante 10 segundos y a continuaci√≥n mata el proceso.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">ProcessDemo</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">   </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">throws</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">Exception</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">      </span><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> pb </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">C:</span><span style="color:#90A4AE;">\P</span><span style="color:#91B859;">rogram Files</span><span style="color:#90A4AE;">\M</span><span style="color:#91B859;">ozilla Firefox</span><span style="color:#90A4AE;">\f</span><span style="color:#91B859;">irefox.exe</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">      </span><span style="color:#90A4AE;font-style:italic;">// Effectively launch the process</span></span>
<span class="line"><span style="color:#90A4AE;">      </span><span style="color:#9C3EDA;">Process</span><span style="color:#90A4AE;"> p </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#39ADB5;">      </span><span style="color:#90A4AE;font-style:italic;">// Check is process is alive or not</span></span>
<span class="line"><span style="color:#90A4AE;">      </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> alive </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> p</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">isAlive</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#39ADB5;">      </span><span style="color:#90A4AE;font-style:italic;">// Wait for the process to end for 10 seconds.</span></span>
<span class="line"><span style="color:#90A4AE;">      </span><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">p</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">waitFor</span><span style="color:#39ADB5;">(</span><span style="color:#F76D47;">10</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> TimeUnit</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">SECONDS</span><span style="color:#39ADB5;">))</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">          System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Process has finished</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">      </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">else</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">          System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Timeout. Process hasn&#39;t finished</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">      </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">      </span><span style="color:#90A4AE;font-style:italic;">// Force process termination.</span></span>
<span class="line"><span style="color:#90A4AE;">      p</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">destroy</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#39ADB5;">      </span><span style="color:#90A4AE;font-style:italic;">// Check again if process remains alive</span></span>
<span class="line"><span style="color:#90A4AE;">      </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> alive </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> p</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">isAlive</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#39ADB5;">      </span><span style="color:#90A4AE;font-style:italic;">// Get the process exit value</span></span>
<span class="line"><span style="color:#90A4AE;">      </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> status </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> p</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">exitValue</span><span style="color:#39ADB5;">();</span><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#90A4AE;">   </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container info"><p class="custom-container-title">C√≥digos de terminaci√≥n</p><p>Un c√≥digo de salida (exit code o a veces tambi√©n return code) es el valor que un proceso le devuelve a su proceso padre para indicarle c√≥mo ha acabado. Si un proceso acaba con un valor de finalizaci√≥n 0 es que todo ha ido bien, cualquier otro valor entre 1 to 255 indica alguna causa de error.</p></div><div class="custom-container question"><p class="custom-container-title">Actividad psp.activities.U2A3_ExitValue</p><p>Crea un nuevo proyecto Java (Ant &gt; Java Application) (configura como nombre del proyecto U2A3_ExitValue y como clase principal psp.activities.U2A3_ExitValue). Prepara un programa que ejecute varios comandos (notepad, calc, comandos shell) uno detr√°s de otro, de forma secuencial y haz que tu programa obtenga el c√≥digo de finalizaci√≥n de cada uno de ellos. Para cada programa imprime el nombre y su c√≥digo de finalizaci√≥n.</p><p>Prueba a poner aplicaciones que no existan o comandos con par√°metros incorrectos.</p><p>¬øQu√© hace Netbeans si pones System.exit(10) para acabar tu programa?. F√≠jate en la consola. ¬øQu√© hace Netbeans si pones System.exit(0) para acabar tu programa.? Cu√°l es entonces el valor por defecto?</p></div><details class="custom-container details"><summary>Soluci√≥n de U2A3_ExitValue</summary><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">U2A3_ExitValue</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">do</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// C√≥digo para pedir un programa/comando a ejecutar</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#9C3EDA;">Scanner</span><span style="color:#90A4AE;"> teclado </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Scanner</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">in</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Introduce el programa / comando que quieres ejecutar (intro para acabar): </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> comando </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> teclado</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">nextLine</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">            </span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">comando</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">equals</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;&quot;</span><span style="color:#39ADB5;">))</span><span style="color:#90A4AE;"> System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">exit</span><span style="color:#39ADB5;">(</span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;font-style:italic;">try</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#39ADB5;">                </span><span style="color:#90A4AE;font-style:italic;">// Preparamos el entrono de ejecuci√≥n del proceso</span></span>
<span class="line"><span style="color:#39ADB5;">                </span><span style="color:#90A4AE;font-style:italic;">// Como no sabemos el contenido del comando, forzamos su conversi√≥n</span></span>
<span class="line"><span style="color:#39ADB5;">                </span><span style="color:#90A4AE;font-style:italic;">// a una lista para que no haya problemas con su ejecuci√≥n</span></span>
<span class="line"><span style="color:#90A4AE;">                </span><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> pb </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">comando</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">split</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">\\</span><span style="color:#91B859;">s</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">                </span><span style="color:#90A4AE;font-style:italic;">// Lanzamos el proceso hijo</span></span>
<span class="line"><span style="color:#90A4AE;">                </span><span style="color:#9C3EDA;">Process</span><span style="color:#90A4AE;"> p </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span><span style="color:#90A4AE;">          </span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">                </span><span style="color:#90A4AE;font-style:italic;">// Esperamos a que acabe para recoger el valor de salida</span></span>
<span class="line"><span style="color:#90A4AE;">                </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> exitValue </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> p</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">waitFor</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">                </span><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">exitValue </span><span style="color:#39ADB5;">==</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">                    System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">El comando </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">toString</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> ha finalizado bien</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">                </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">else</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">                    System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">El comando </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">toString</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> ha finalizado con errores. C√≥digo (</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> exitValue </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">)</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">                </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">catch</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">InterruptedException</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">|</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">IOException</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">ex</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">                System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">err</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">ex</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getLocalizedMessage</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">                ex</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">printStackTrace</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;">                       </span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">while</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(true);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><div class="custom-container danger"><p class="custom-container-title">Gesti√≥n de excepciones</p><p>La llamada al m√©todo <strong>waitFor</strong> hace que el proceso padre se bloquee hasta que el proceso hijo termina o bien hasta que el bloqueo es interrumpido por alguna se√±al del sistema (Excepci√≥n) que recibe el proceso padre.</p><p>Es mejor gestionar las excepciones lo m√°s cerca posible del origen en vez de pasarlas a niveles superiores.</p></div><h3 id="lanzar-una-clase-java-como-proceso-desde-otra-clase-java-en-el-mismo-proyecto" tabindex="-1">Lanzar una clase Java como proceso desde otra clase java en el mismo proyecto</h3><p>Para las actividades os pedir√© que program√©is tanto el proceso padre como el proceso hijo. Para hacer eso, una de las clases tendr√° que lanzar a la otra.</p><p>Para hacer esto, ambas clases deben tener un m√©todo main. As√≠ que en las propiedades del proyecto Netbeans deberemos seleccionar cu√°l de las clases se ejecutar√° primero, normalmente la clase <code>Lanzador o Launcher</code> (proceso padre).</p><p><img src="/apuntes/assets/seleccionmain-033534e6.png" alt="Seleccionar clase principal"></p><p>Antes de que una clase pueda lanzar a otra, al menos la segunda (proceso hijo) debe estar compilada, es decir, el archivo .class debe haberse creado dentro del directorio build/classes.</p><p><img src="/apuntes/assets/comandotree-dbcc4085.png" alt="Seleccionar directorio de trabajo "></p><p>Entonces y s√≥lo entonces, previa configuraci√≥n de los par√°metros de ejecuci√≥n del proceso tal y como se muestra en el ejemplo, se podr√° ejecutar una clase desde otra.</p><div class="custom-container info"><p class="custom-container-title">Directorio de trabajo</p><p>Si nos fijamos en la estructura de directorios de un proyecto y entendemos c√≥mo se invocan unas clases a otras, entenderemos porqu√© el directorio de trabajo debe ser <em>build/classes</em>.</p><p>En Java, cuando se ejecuta una clase <code>java paquete.clase</code>, la MV Java espera encontrar los directorios que forman el paquete (psp/u2/actividad10) a partir del punto donde se est√° invocando el comando. Por eso, para que pueda encontrar la clase (el archivo .class), debemos ubicarnos previamente en el directorio <code>build/classes</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// Prepare the environment and the command</span></span>
<span class="line"><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> pb </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">java</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">psp.u2.actividad10.Sumador</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">directory</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">File</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">build/classes</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#9C3EDA;">Process</span><span style="color:#90A4AE;"> p </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="custom-container question"><p class="custom-container-title">Actividad psp.activities.U2A4_Lanzador</p><p>Crea un nuevo proyecto Java (Ant &gt; Java Application) (configura como nombre del proyecto U2A3_Lanzador y como clase principal psp.activities.U2A4_Lanzador).</p><p>Ahora, en el mismo proyecto y dentro del mismo paquete crea otra clase, Lanzado, con un m√©todo main que recibir√° el nombre del programa que debe ejecutar como par√°metro del m√©todo main(args). Haz que esta aplicaci√≥n cree un nuevo proceso para ejecutar el programa recibido como par√°metro.</p><p>La clase terminar√° devolviendo como c√≥digo de finalizaci√≥n el que el programa lanzado le haya devuelto a ella.</p><blockquote><p>M√©todo System.exit()</p><ul><li>Cero. El c√≥digo cero debe devolverse cuando la ejecuci√≥n del proceso haya ido bien, esto es, que ha terminado su ejecuci√≥n sin problemas.</li><li>Distinto de cero. AUn c√≥digo distinto de cero indica una terminaci√≥n con errores. Java nos permite usar c√≥digos diferentes para los diferentes tipos de error.</li></ul></blockquote><p>Por √∫ltimo, podemos hacer que U2A4_Lanzador pregunte al usuario qu√© aplicaci√≥n quiere ejecutar y pas√°rsela a la clase U2A4_Mandado.</p><p>En Lanzador recoge el c√≥digo de finalizaci√≥n de Mandado y muestra un mensaje indicando si el proceso termin√≥ bien o con errores.</p></div><details class="custom-container details"><summary>Soluci√≥n de U2A4_Lanzador</summary><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">U2A4_Launcher</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// C√≥digo para pedir un programa/comando a ejecutar</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">Scanner</span><span style="color:#90A4AE;"> teclado </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Scanner</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">in</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Introduce el programa / comando que quieres ejecutar: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> comando </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> teclado</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">nextLine</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">try</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// Preparamos el entrono de ejecuci√≥n del proceso</span></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// Como no sabemos el contenido del comando, forzamos su conversi√≥n</span></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// a una lista para que no haya problemas con su ejecuci√≥n</span></span>
<span class="line"><span style="color:#90A4AE;">            comando </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">java psp.activities.U2A4_Commander </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> comando</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> pb </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">comando</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">split</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">\\</span><span style="color:#91B859;">s</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;">            pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">directory</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">File</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">build/classes</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// Lanzamos el proceso hijo</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#9C3EDA;">Process</span><span style="color:#90A4AE;"> p </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span><span style="color:#90A4AE;">          </span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// Esperamos a que acabe para recoger el valor de salida</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> exitValue </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> p</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">waitFor</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">exitValue </span><span style="color:#39ADB5;">==</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">                System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">El comando </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">toString</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> ha finalizado bien</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">else</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">                System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">El comando </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">command</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">toString</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> ha finalizado con errores. C√≥digo (</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> exitValue </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">)</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;">                </span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">catch</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">InterruptedException</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">|</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">IOException</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">ex</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">err</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">ex</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getLocalizedMessage</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">            ex</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">printStackTrace</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;">                       </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">U2A4_Commander</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">throws</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">Exception</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span><span style="color:#90A4AE;">       </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Lectura de informaci√≥n desde los par√°metros de entrada </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Se supone que recibimos: args[0] args[1] args[2] ..... args[args.length-1 --&gt; comando a ejecutar</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> comando </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">for</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> i </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">;</span><span style="color:#90A4AE;"> i </span><span style="color:#39ADB5;">&lt;</span><span style="color:#90A4AE;"> args</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">length</span><span style="color:#39ADB5;">;</span><span style="color:#90A4AE;"> i</span><span style="color:#39ADB5;">++)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            comando </span><span style="color:#39ADB5;">+=</span><span style="color:#90A4AE;"> args</span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">i</span><span style="color:#39ADB5;">]</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">        comando</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">trim</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">                </span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">ProcessBuilder</span><span style="color:#90A4AE;"> pb </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ProcessBuilder</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">comando</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">split</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">\\</span><span style="color:#91B859;">s</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span><span style="color:#90A4AE;">            </span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Lanzamos el proceso hijo</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">Process</span><span style="color:#90A4AE;"> p </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> pb</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span><span style="color:#90A4AE;">          </span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Esperamos a que acabe para recoger el valor de salida</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> exitValue </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> p</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">waitFor</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">exit</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">exitValue</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><div class="custom-container warning"><p class="custom-container-title">Programaci√≥n de clases &quot;hijas&quot;</p><p>Debemos tener en cuenta que una clase se puede ejecutar de forma independiente o puede ser llamada desde otro proceso.</p><p>Por eso, el c√≥digo de las clases, hijas o padres, se hace sin tener en cuenta c√≥mo van a ser llamadas. Debe ser <strong>independiente</strong> tal y como lo son unos procesos de otros.</p><p>As√≠, en el anterior proyecto yo podr√≠a ejecutar la clase psp.activities.U2A4_Commander de forma independiente, pas√°ndole el nombre de los programas.</p><p>Puedo hacerlo invoc√°ndola desde l√≠nea de comandos o desde Netbeans:</p><ul><li>java psp.activities.U2A4_Commander programa1 programa2 programa3</li><li>En las propiedades del proyecto, en el apartado Run, seleccionando U2A4_Commander como clase principal y poniendo como Arguments: programa1 programa2 programa3</li></ul></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Editors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: vicente@iesdoctorbalmis.com">Vicente Mart√≠nez</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/apuntes/en/unit2/runtime.html" class="" aria-label="2.1 Creaci√≥n de procesos en Java con Runtime"><!--[--><!--]--> 2.1 Creaci√≥n de procesos en Java con Runtime <!--[--><!--]--></a></span><span class="next"><a href="/apuntes/en/unit2/iostreams.html" class="" aria-label="2.3 Gesti√≥n de la E-S de un proceso"><!--[--><!--]--> 2.3 Gesti√≥n de la E-S de un proceso <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/apuntes/assets/app-7f6f5727.js" defer></script>
  </body>
</html>
